# TEW K8s 叢集專用設定（資源受限、無 GPU）

global:
  imageRegistry: ghcr.io
  imagePullSecrets: []

# API 服務
api:
  replicaCount: 1
  image:
    repository: ghcr.io/timcsy/vocal-remover-api
    tag: latest
    pullPolicy: Always
  resources:
    requests:
      memory: "128Mi"
      cpu: "50m"
    limits:
      memory: "256Mi"
      cpu: "200m"

# Worker 服務（CPU 模式，資源受限）
worker:
  replicaCount: 1
  image:
    repository: ghcr.io/timcsy/vocal-remover-api
    tag: latest
    pullPolicy: Always
  resources:
    requests:
      memory: "256Mi"
      cpu: "100m"
    limits:
      memory: "1Gi"
      cpu: "400m"
  gpu:
    enabled: false
  tmpStorage:
    sizeLimit: 5Gi

# Frontend 服務
frontend:
  replicaCount: 1
  image:
    repository: ghcr.io/timcsy/vocal-remover-frontend
    tag: latest
    pullPolicy: Always
  resources:
    requests:
      memory: "32Mi"
      cpu: "10m"
    limits:
      memory: "64Mi"
      cpu: "100m"

# Redis 設定
redis:
  enabled: true
  resources:
    requests:
      memory: "32Mi"
      cpu: "10m"
    limits:
      memory: "64Mi"
      cpu: "100m"
  persistence:
    enabled: true
    size: 1Gi
    storageClass: "vultr-block-storage"

# MinIO 設定
minio:
  enabled: true
  resources:
    requests:
      memory: "128Mi"
      cpu: "50m"
    limits:
      memory: "256Mi"
      cpu: "200m"
  persistence:
    enabled: true
    size: 10Gi
    storageClass: "vultr-block-storage"
  auth:
    accessKey: "minioadmin"
    secretKey: "vocal-remover-secret-2024"

# 處理設定（CPU 模式）
processing:
  maxUploadSize: 104857600   # 100MB（較小以節省資源）
  maxVideoDuration: 300      # 5 分鐘
  rateLimitRequests: 5
  rateLimitWindow: 3600
  resultExpiryHours: 12
  jobTimeoutMinutes: 60      # CPU 模式需要更長時間
  device: "cpu"

# Ingress 設定
ingress:
  enabled: true
  className: nginx
  annotations:
    nginx.ingress.kubernetes.io/proxy-body-size: "100m"
    nginx.ingress.kubernetes.io/proxy-read-timeout: "600"
    nginx.ingress.kubernetes.io/proxy-send-timeout: "600"
  hosts:
    - host: ""
      paths:
        - path: /
          pathType: Prefix
  tls: []

# KEDA 停用
keda:
  enabled: false
